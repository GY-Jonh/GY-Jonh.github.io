<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>3Dbanner图旋转</title>
  <style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
	.banner-div{
	   position: relative;
	}
	.banner-div *{
		box-sizing:border-box; 
		 
	}
	
	li{
		list-style:none;
	}

	.out-ul {
		margin: 50px auto;
		width:800px;
		height: 360px;
		position: relative;
	}

	.out-ul > li{ 
		height: 360px;
		float:left;
		position: relative;
		perspective: 2000px;
	}

	.in-ul{
		width:100%;
		height: 100%; 
		transform-style: preserve-3d;
		transform-origin: 50% 50% -180px;
		transition: all .3s linear;
	}

	.in-ul > li{
		width:100%;
		height: 100%;
		position:absolute;
		overflow: hidden;
	} 

	.in-ul > li  div{
		position: absolute;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;
		background-size: auto 100%;

	}
	.in-ul > li.img1 div{
		background-image: url("images/1.png");
	}
	.in-ul > li.img2 div{
		background-image: url("images/2.png");
	}
	.in-ul > li.img3 div{
		background-image: url("images/3.png");
	}
	.in-ul > li.img4 div{
		background-image: url("images/4.png");
	}


	.in-ul > li.img1{
		transform-origin: bottom;
		transform: translateY(-360px) rotateX(90deg);
	}


	.in-ul > li.img2{
		z-index:999;
	}

	.in-ul > li.img3{
		transform-origin: top;
		transform: translateY(360px) rotateX(-90deg);
	}
	.in-ul > li.img4{ 
		    transform: translateZ(-360px) rotateX(180deg);
	}

	.point-div{
		position: absolute;
		bottom: 20px;
		left: 50%;
		text-align: center;
		margin: auto;
		z-index: 9999;
	}

	.point-div span{
		display: inline-block;
		width: 15px;
		height:15px;
	    margin-left:10px; 
		background-color: gray; 
		cursor: pointer;
		border-radius: 50%;
	}
	.point-div span.seleted{
		background-color: yellow; 
	}
	
  </style>
 </head>
 <body>
  <div id="banner-div" class="banner-div"> 
	  
  </div>

</body>
 <script>
//封装插件实现
	function bannerFn(obj){
		this.allN = obj.allN || 800;
		this.n = obj.n || 80;
		this.wl = this.allN / this.n;
		this.bannerDiv = document.querySelector(obj.el);
		this.showPoint = obj.showPoint || true;
	}

	bannerFn.prototype.init = function(){
			var outUlHead = "<ul class='out-ul'>";
			var outUlfoot = "</ul>" ; 
			var html = "";
			var wl = this.wl;
			for(var i = 0;i<this.n;i++){
				var style = "style='background-position:-"+i*wl+"px 0;'";//
				html += `
					<li style='width:${wl}px;'>
						<ul class="in-ul">
							<li class='img1'><div ${style}></div></li>
							<li class='img2'><div ${style}></div></li>
							<li class='img3'><div ${style}></div></li>
							<li class='img4'><div ${style}></div></li>
						</ul>
					</li>
				`;							
		   }
		   var point= this.showPoint?`
						<div class="point-div">
						  <span class="seleted"></span>
						  <span></span>
						  <span></span>
						  <span></span>
						</div>
		   ` : "";
		   this.bannerDiv.innerHTML = outUlHead+html+outUlfoot+point;
		   this.doIt();
	}

	bannerFn.prototype.doIt = function(){
			this.inUls = document.querySelectorAll('.in-ul');
			this.points = document.querySelectorAll('.point-div span');  
			for(var i = 0,p_len = this.points.length;i < p_len; i++){
				this.points[i].onclick = (function(i){
				  return function(){
						  this.points.forEach(function(item){
							item.className = "";
						  });
						  this.points[i].className = "seleted"
						  this.xuanzhuan(i);
						 }.bind(this);
				}.bind(this))(i);
			}
	}

	bannerFn.prototype.xuanzhuan = function(num){
			 var i = 0;
			 var len = this.inUls.length;
			 for(;i < len;i++){
				this.inUls[i].style.cssText = "transform: rotateX(-"+num*90+"deg);transition-delay:"+i*0.005+"s";
			 }
		}
		var banner = new bannerFn({
			el:"#banner-div"
		}).init();


//封装对象实现
	/*var banner = {
		allN:800,
		n:80,
		wl:null, 
		bannerDiv:null,
		points:null,
		inUls: null,
		getWl:function(){
			var n = this.n
			var all = this.allN;
			 this.wl = all/n;
		},
		init: function(dom){ 
			this.bannerDiv = document.querySelector('#banner-div') || document.querySelector('.banner-div');
			this.getWl();
			var outUlHead = "<ul class='out-ul'>";
			var outUlfoot = "</ul>" ; 
			var html = "";
			var wl = this.wl;
			for(var i = 0;i<this.n;i++){
				var style = "style='left:-"+i*wl+"px;'"
				html += `
					<li style='width:${wl}px;'>
						<ul class="in-ul">
							<li class='img1'><img ${style} src='images/1.png'></li>
							<li class='img2'><img ${style} src='images/2.png'></li>
							<li class='img3'><img ${style} src='images/3.png'></li>
							<li class='img4'><img ${style} src='images/4.png'></li>
						</ul>
					</li>
				`;							
		   }
		   var point= `
						<div class="point-div">
						  <span class="seleted"></span>
						  <span></span>
						  <span></span>
						  <span></span>
						</div>
		   `;
		   this.bannerDiv.innerHTML = outUlHead+html+outUlfoot+point;
		   this.doIt();
		},
		doIt: function(){
			this.inUls = document.querySelectorAll('.in-ul');
			this.points = document.querySelectorAll('.point-div span');  
			for(var i = 0,p_len = this.points.length;i < p_len; i++){
				this.points[i].onclick = (function(i){
				  return function(){
					  this.points.forEach(function(item){
						item.className = "";
					  });
					  this.points[i].className = "seleted"
					  this.xuanzhuan(i);
						 }.bind(this);
				}.bind(this))(i);
			}
		},
		xuanzhuan: function(num){
			 var i = 0;
			 var len = this.inUls.length;
			 for(;i < len;i++){
				this.inUls[i].style.cssText = "transform: rotateX(-"+num*90+"deg);transition-delay:"+i*0.005+"s";
			 }
				
			 
		}

	}

	banner.init();


//原生JS实现
	/*var n = 80, wl = 800/n;
	var bannerDiv = document.querySelector('#banner-div') || document.querySelector('.banner-div'); 
	createList();
	var points = document.querySelectorAll('.point-div span');   
	var inUls = document.querySelectorAll('.in-ul');
	for(var i = 0,p_len = points.length;i < p_len; i++){
			points[i].onclick = (function(i){
			  return function(){
				  points.forEach(function(item){
					item.className = "";
				  });
				  points[i].className = "seleted"
				 xuanzhuan(i);
			  }
			})(i);
	}
	
	function xuanzhuan(i){ 
		inUls.forEach(function(item,index){
			item.style.cssText = "transform: rotateX(-"+i*90+"deg);transition-delay:"+index*0.005+"s"
		})
	}

	function createList(){
		var outUlHead = "<ul class='out-ul'>";
		var outUlfoot = "</ul>" ; 
		var html = "";
		for(var i = 0;i<80;i++){
		    var style = "style='left:-"+i*wl+"px;'"
			html += `
			    <li style='width:${wl}px;'>
					<ul class="in-ul">
						<li class='img1'><img ${style} src='images/1.png'></li>
						<li class='img2'><img ${style} src='images/2.png'></li>
						<li class='img3'><img ${style} src='images/3.png'></li>
						<li class='img4'><img ${style} src='images/4.png'></li>
					</ul>
				</li>
			`;							
	   }
	   var point= `
					<div class="point-div">
					  <span class="seleted"></span>
					  <span></span>
					  <span></span>
					  <span></span>
					</div>
	   `;
	   bannerDiv.innerHTML = outUlHead+html+outUlfoot+point;
	}*/
	
 </script>
</html>
